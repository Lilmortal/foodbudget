# Migration `20201017011451-add-recipe-meals`

This migration has been generated by Jack Tan at 10/17/2020, 2:14:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."meals" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."recipe_meals" (
"id" SERIAL,
"recipe_id" integer   ,
"meals_id" integer   ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."recipe_meals" ADD FOREIGN KEY ("meals_id")REFERENCES "public"."meals"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."recipe_meals" ADD FOREIGN KEY ("recipe_id")REFERENCES "public"."recipes"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201017005155-removed-type-alias-and-add-price-currency..20201017011451-add-recipe-meals
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model adjectives {
   type              String              @id
@@ -22,8 +22,14 @@
   type            String            @id
   recipe_cuisines recipe_cuisines[]
 }
+model meals {
+  id           Int            @id @default(autoincrement())
+  name         String
+  recipe_meals recipe_meals[]
+}
+
 model diets {
   type         String         @id
   recipe_diets recipe_diets[]
   user_diets   user_diets[]
@@ -77,8 +83,16 @@
   ingredients ingredients? @relation(fields: [name], references: [name])
   recipes     recipes?     @relation(fields: [recipe_id], references: [id])
 }
+model recipe_meals {
+  id        Int      @id @default(autoincrement())
+  recipe_id Int?
+  meals_id  Int?
+  meals     meals?   @relation(fields: [meals_id], references: [id])
+  recipes   recipes? @relation(fields: [recipe_id], references: [id])
+}
+
 model recipes {
   id                 Int                  @id @default(autoincrement())
   name               String
   link               String               @unique
@@ -88,8 +102,9 @@
   recipe_adjectives  recipe_adjectives[]
   recipe_allergies   recipe_allergies[]
   recipe_cuisines    recipe_cuisines[]
   recipe_diets       recipe_diets[]
+  recipe_meals       recipe_meals[]
   recipe_ingredients recipe_ingredients[]
   user_saved_recipes user_saved_recipes[]
 }
```


